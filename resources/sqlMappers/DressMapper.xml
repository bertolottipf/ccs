<?xml version = "1.0" encoding = "UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="DressMapper">
	
	
	
	<select id="selectAll" resultMap="result">
		SELECT 
			* 
		FROM 
			dresses
	</select>
	
	
	
	<insert id="insert" parameterType="Dress">
		INSERT INTO
			dresses (size, age, files, colour, matherial, description, id_user)
		VALUES
			(#{size}, #{age}, #{files}, #{colour}, #{matherial}, #{description}, #{idUser})
		<selectKey keyProperty="id" resultType="int">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>
	
	
	
	<select id="selectOne" resultMap="result" parameterType="int">
		SELECT 
			* 
		FROM 
			dresses 
		WHERE 
			id = #{id}
	</select>
	
	
	
	<select id="selectByUserId" parameterType="int" resultMap="result">
		SELECT 
			* 
		FROM 
			dresses 
		WHERE 
			id_user = #{idUser} 
	</select>
	
	

	<resultMap type="Dress" id="result">
		<id property="id" column="id"/>
		<result property="id" column="id" /> 
		<result property="size" column="size" /> 
		<result property="age" column="age" /> 
		<result property="files" column="files" /> 
		<result property="colour" column="colour" /> 
		<result property="matherial" column="matherial" /> 
		<result property="description" column="description" /> 
		
		<result property="user.id" column="id_user" />
	</resultMap>

	

	<update id="update" parameterType="Dress">
		UPDATE 
			dresses
		SET 
			size = #{size},
			age = #{age},
			files = #{files},
			colour = #{colour},
			matherial = #{matherial},
			description = #{description} 
			id_user = #{user.id} 
		WHERE 
			id = #{id}
	</update>	
	
	
	
	
	<delete id="delete" parameterType="int">
		DELETE FROM 
			dresses 
		WHERE 
			id = #{id}
	</delete>
	
</mapper>